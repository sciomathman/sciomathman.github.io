<!DOCTYPE html>
<html>
<head>  
  <title>Tamil Test</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/qstyle.css">
  <link rel="stylesheet" href="css/w3.css">
  <script type="text/javascript" src="js/qrcode.js"></script>
  <style type="text/css">
    body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        font: 12pt "Tahoma";
    }
    * {
        box-sizing: border-box;
        -moz-box-sizing: border-box;
    }
    .page {
        width: 210mm;
        min-height: 297mm;
        padding: 1.5cm;
        margin: 10mm auto;
        border: 1px #000000 solid;
        border-radius: 5px;
        background: white;
        box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);
    }
    .subpage {
        padding: 0.5cm;
        border: 1px #808080 solid;
        height: 267mm;
        outline: 0.25cm #eea500 solid;
    }
    .center {
   font-size:1.5vw;
       height: auto;
       text-align: center;
    padding: 10px;
    position: relative;
    }
    @page {
        size: A4;
        margin: 0;
    }
    @media print {
        html, body {
            width: 210mm;
            height: 297mm;        
        }
        .page {
            margin: 0;
            border: initial;
            border-radius: initial;
            width: initial;
            min-height: initial;
            box-shadow: initial;
            background: initial;
            page-break-after: none;
        }

    }
      /* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  background-color: #fefefe;
  margin: auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
}

/* The Close Button */
.close {
  color: #aaaaaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}
  </style>
</head>
<body>    
    <div class="page">
        <div class="subpage">
           <div class="center">
           		<p style=" font-size: 1.5em;clear:both;">திருக்குறள் திறன் தேர்வு</p>
           		<p style = "font-size: 0.8em; font-weight:bold;"> எடுத்து கொண்ட நேரம்:<input  style="display:inline-block;width:8ch" type="text" readonly="" id="timespent" value="00:00"></p>
           		<input type="hidden" name="starttime" value="12/12/2023 6:56:03 AM">
           </div>
           
             <div id="questions_block">  
           <input type="hidden" id="question_set" name="question_set" value="1-2">
             <h4 id="qtitle1" style="color:red;">கேள்வி 1 - 10ல்:</h4>
    <h4 id="qtext1">அகர முதல எழுத்தெல்லாம் ஆதி
_____ முதற்றே உலகு</h4>
     
      
      <div style="position:relative;width:100%;">
        <div id="altcontainer" class="notranslate">
          <label class="radiocontainer" id="qlabel1_1">பகவான்<input type="radio" name="quiz1" id="q1_1" onclick="clickRadio(this)" value="1" ><span class="checkmark"></span></label><label class="radiocontainer" id="qlabel1_2"> பகவன்<input type="radio" name="quiz1" id="q1_2" onclick="clickRadio(this)" value="2" ><span class="checkmark"></span></label><label class="radiocontainer" id="qlabel1_3"> படைத்தான்<input type="radio" name="quiz1" id="q1_3" onclick="clickRadio(this)" value="3" ><span class="checkmark"></span></label>
        </div>
      </div>
      <h4 id="qtitle2" style="color:red;">கேள்வி 2 - 10ல்:</h4>
    <h4 id="qtext2">கற்றதனால் ஆய பயனென்கொல் ________
நற்றாள் தொழாஅர் எனின்</h4>

      
      <div style="position:relative;width:100%;">
        <div id="altcontainer" class="notranslate">
          <label class="radiocontainer" id="qlabel2_1">வாலறிவன்<input type="radio" name="quiz2" id="q2_1" onclick="clickRadio(this)" value="1" ><span class="checkmark"></span></label><label class="radiocontainer" id="qlabel2_2"> வானறிவான்<input type="radio" name="quiz2" id="q2_2" onclick="clickRadio(this)" value="2"><span class="checkmark"></span></label><label class="radiocontainer" id="qlabel2_3">நூலறிவான்<input type="radio" name="quiz2" id="q2_3" onclick="clickRadio(this)" value="3" ><span class="checkmark"></span></label>
        </div>
      </div>
      <div id="answerbuttoncontainer">
      <button class="answerbutton w3-btn w3-border"  onclick="clickBackButton()">❮முன்னே</button>
        <button class="answerbutton w3-btn w3-border " onclick="clickNextButton()">அடுத்து ❯</button>
        <br>
        <br>
        <button class="w3-btn w3-green w3-border-red w3-large" onclick="clickFinishButton()">  முடிந்தது  </button>
      </div>
    </div>
        </div>
    </div>
     
<!-- The Modal -->
<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <p>இந்த  QR codeயை சிகேன் செய்து அனுப்பவும்</p>
      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g id="qrcode"/>
  </svg>
   
  </div>

</div>
    
 <script>
 var questions = {
 		"1":{
 			"title":"கேள்வி 1 - 10ல்:",
 			"question": "அகர முதல எழுத்தெல்லாம் ஆதி _____ முதற்றே உலகு",
 			"options" : ["பகவான்", "பகவன்", "படைத்தான்"]
 		},
 		"2":{
 		"title":"கேள்வி 2 - 10ல்:",
 		"question": "கற்றதனால் ஆய பயனென்கொல் ________நற்றாள் தொழாஅர் எனின்",
 		"options" :["வாலறிவன்", "வானறிவான்", "நூலறிவான்"]
 		},
 		"3":{
 		"title":"கேள்வி 3 - 10ல்:",
 		"question": "மலர்மிசை ஏகினான் மாணடி சேர்ந்தார் ________ நீடுவாழ் வார்",
 		"options" :["புவிமிசை", "அருள்பெற்று", "நிலமிசை"]
 		},
 	  "4":{
 	  "title":"கேள்வி 4 - 10ல்:",
 		"question":"வேண்டுதல்வேண் டாமை இலானடி சேர்ந்தார்க்கு யாண்டும் _______ இல",
 	     "options" :["கடும்பை", "உடும்பை", "இடும்பை"]
 		},	
 	 "5":{
 	 "title":"கேள்வி 5 - 10ல்:",
 		"question":"இருள்சேர் இருவினையும் சேரா ________ பொருள்சேர் புகழ்புரிந்தார் மாட்டு",
 		 	     "options" :["முனிவன்", "இறைவன்", "மனிதன்"]
 		},	
 		
    "6":{
    "title":"கேள்வி 6 - 10ல்:",
 		"question":"பொறிவாயில் ஐந்தவித்தான் ________ ஒழுக்க நெறிநின்றார் நீடுவாழ் வார்",
 		  "options" :["பொய்தீர்", "மெய்தீர்", "வாய்தீர்"]
 		},	
 		
    "7":{
    "title":"கேள்வி 7 - 10ல்:",
 		"question":"தனக்குவமை இல்லாதான் தாள்சேர்ந்தார்க் கல்லால் ________ மாற்றல் அரிது",
 		  "options" :["மனக்கவலை", "பிறர்கவலை", "மதிக்கவலை"]
 		},	
     "8":{
     "title":"கேள்வி 8 - 10ல்:",
 		"question": "_________ அந்தணன் தாள்சேர்ந்தார்க் கல்லால் பிறவாழி நீந்தல் அரிது",
 		  "options" :["முடிவாழி", "அறவாழி", "ஆருயிர்"]
 		},	
 		
      "9":{
      "title":"கேள்வி 9 - 10ல்:",
 		"question": "கோளில் பொறியின் குணமிலவே எண்குணத்தான் தாளை வணங்காத் ____",
 	      "options" :["கலை", "தலை", "மலை"]
 		},	
 		
 	  "10":{
 	  "title":"கேள்வி 10 - 10ல்:",
 		"question": "பிறவிப் பெருங்கடல் நீந்துவர் நீந்தார் இறைவன் ________ தார்",
 		 	      "options" :["படிசேரா", "துணைசேரா", "அடிசேரா"]
 		}
 		
 };
 
 const qset = ["1-2","3-4","5-6","7-8","9-10"];
 var answers = {"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0};
 	function clickRadio(ele){
 		let current_qset = document.getElementById("question_set").value;
 		let q = current_qset.split("-");
 		let eid = ele.id;
 		let qselect = eid.split("_")[0] == "q1"?0:1;
 		let answerto = q[qselect];
 		answers[answerto] = ele.value;
 		//alert(JSON.stringify(answers));
 	}
 	
 	function clickFinishButton(){
 		let testflag = checkAllAttempted();
 		if(testflag[0] == true){
			alert("Well done");
 			let tourl = "https://sciomathman.github.io/qrcode/result.html?answers=";
 			let sendthis = tourl + getAnswerString();
 			modal.style.display = "block";
 			makeCode(sendthis);
 		}else{
 			alert("தேர்வு முழுமைபெறவில்லை: " + testflag[2] + " ஆகியன முடிக்கபடவில்லை"); 
 		}
 	}
 	
 	function getAnswerString(){
 		let str = "";
 		for (let a in answers) {
 			str = str + answers[a];
 		}
 		return str;
 	}
 	
 	
 	function checkAllAttempted(){
 	let r = [false,0,""];
 		for (let a in answers) {
  			if(answers[a] == 0){
  				r[0] = false;
  				r[1] = r[1] + 1;
  				r[2] = r[2] + "[Q" + a + ']';
  			}
  			
		}
		if(r[1] == 0) r[0] = true;
		return r;
 	}
 	function clickBackButton(){
 	let current_question = document.getElementById("question_set").value;
 	let qindex = qset.indexOf(current_question);
	 	if(qindex > 0){
	 		qindex --;
	 		qvalue = qset[qindex];
	 		const qarray = qvalue.split("-");
	 		const keys = qarray.keys();
            let toset = 1;
			for (let x of keys) {
  					document.getElementById("qtitle"+toset).innerHTML = questions[qarray[x]].title;
  					document.getElementById("qtext"+toset).innerHTML = questions[qarray[x]].question;  															
  					document.getElementById("qlabel"+toset + "_1").firstChild.data = questions[qarray[x]].options[0];  																			
  				     document.getElementById("qlabel"+toset + "_2").firstChild.data = questions[qarray[x]].options[1];
  				     document.getElementById("qlabel"+toset + "_3").firstChild.data = questions[qarray[x]].options[2];
  				   if(answers[qarray[x]] != 0) {
  				     	let tocheck = answers[qarray[x]] ;
  				     	document.getElementById("q" + toset + "_" + tocheck).checked = true;
  				     }
  				     
  					toset = toset +1;																				
			}
			document.getElementById("question_set").value = qvalue;
	 	}
 	}
 	
 	function clickNextButton(){
 	 	let current_question = document.getElementById("question_set").value;
 	let qindex = qset.indexOf(current_question);
	 	if(qindex < qset.length-1){
	 		qindex ++;
	 		qvalue = qset[qindex];
	 		const qarray = qvalue.split("-");
	 		const keys = qarray.keys();
            let toset = 1;
			for (let x of keys) {
  					document.getElementById("qtitle"+toset).innerHTML = questions[qarray[x]].title;
  					document.getElementById("qtext"+toset).innerHTML = questions[qarray[x]].question;  															
  					document.getElementById("qlabel"+toset + "_1").firstChild.data = questions[qarray[x]].options[0];  																			
  				     document.getElementById("qlabel"+toset + "_2").firstChild.data = questions[qarray[x]].options[1];
  				     document.getElementById("qlabel"+toset + "_3").firstChild.data = questions[qarray[x]].options[2];
  				   if(answers[qarray[x]] != 0) {
  				     	let tocheck = answers[qarray[x]] ;
  				     	document.getElementById("q" + toset + "_" + tocheck).checked = true;
  				     }
  					toset = toset +1;																				
			}
			document.getElementById("question_set").value = qvalue;
	 	}
 	}

var totalSeconds = 0;
var totalMinutes = 0;
var qtimer = document.getElementById("timespent");
setInterval(setTime, 1000);

function setTime() {
  ++totalSeconds;
  let ts = totalSeconds % 60;
  if(ts == 0) {
  	++totalMinutes;
  }
  qtimer.value =  pad(totalMinutes) + ":" + pad(ts);
}
function pad(val) {
  var valString = val + "";
  if (valString.length < 2) {
    return "0" + valString;
  } else {
    return valString;
  }
}

// Get the modal
var modal = document.getElementById("myModal");


// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];


// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
var qrcode = new QRCode(document.getElementById("qrcode"), {
      width : 100,
      height : 100,
      useSVG: true
  });

  function makeCode (senddata) {

      qrcode.makeCode(senddata);
  }



 </script>
    
</body>
</html>
